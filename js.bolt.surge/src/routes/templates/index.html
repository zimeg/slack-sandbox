<!doctype html>
<html lang="en" id="html">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>https://surgem.ai/</title>
    <script src="https://unpkg.com/htmx.org@1.9.2"></script>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="max-w-screen-md mx-auto p-4 space-y-1">
    <h1
      class="font-mono text-2xl underline cursor-pointer"
      hx-get="/"
      hx-replace-url="true"
      hx-swap="outerHTML"
      hx-target="body"
    >
      https://surgem.ai/
    </h1>
    <p>> a fast application for electronic mail</p>
    <a
      class="cursor-pointer"
      href="<%= slack ? '/' : '/slack' %>"
      hx-get="<%= slack ? '/' : '/slack' %>"
      hx-replace-url="true"
      hx-trigger="click"
      hx-swap="outerHTML"
      hx-target="body"
      style="
        align-items: center;
        color: #000;
        background-color: #fff;
        border: 1px solid #ddd;
        border-radius: 4px;
        display: inline-flex;
        font-family: Lato, sans-serif;
        font-size: 14px;
        font-weight: 600;
        height: 44px;
        justify-content: center;
        text-decoration: none;
        width: 44px;
      "
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        style="height: 18px; width: 18px; margin-right: 0"
        viewBox="0 0 122.8 122.8"
      >
        <path
          d="M25.8 77.6c0 7.1-5.8 12.9-12.9 12.9S0 84.7 0 77.6s5.8-12.9 12.9-12.9h12.9v12.9zm6.5 0c0-7.1 5.8-12.9 12.9-12.9s12.9 5.8 12.9 12.9v32.3c0 7.1-5.8 12.9-12.9 12.9s-12.9-5.8-12.9-12.9V77.6z"
          fill="#e01e5a"
        ></path>
        <path
          d="M45.2 25.8c-7.1 0-12.9-5.8-12.9-12.9S38.1 0 45.2 0s12.9 5.8 12.9 12.9v12.9H45.2zm0 6.5c7.1 0 12.9 5.8 12.9 12.9s-5.8 12.9-12.9 12.9H12.9C5.8 58.1 0 52.3 0 45.2s5.8-12.9 12.9-12.9h32.3z"
          fill="#36c5f0"
        ></path>
        <path
          d="M97 45.2c0-7.1 5.8-12.9 12.9-12.9s12.9 5.8 12.9 12.9-5.8 12.9-12.9 12.9H97V45.2zm-6.5 0c0 7.1-5.8 12.9-12.9 12.9s-12.9-5.8-12.9-12.9V12.9C64.7 5.8 70.5 0 77.6 0s12.9 5.8 12.9 12.9v32.3z"
          fill="#2eb67d"
        ></path>
        <path
          d="M77.6 97c7.1 0 12.9 5.8 12.9 12.9s-5.8 12.9-12.9 12.9-12.9-5.8-12.9-12.9V97h12.9zm0-6.5c-7.1 0-12.9-5.8-12.9-12.9s5.8-12.9 12.9-12.9h32.3c7.1 0 12.9 5.8 12.9 12.9s-5.8 12.9-12.9 12.9H77.6z"
          fill="#ecb22e"
        ></path>
      </svg>
    </a>
    <div>
      <button
        class="border rounded-md font-mono px-2 border-[#ddd]"
        hx-post="/api/v1/count"
        hx-swap="innerHTML"
        hx-target="#counter"
        hx-trigger="click"
        hx-on="htmx:afterOnLoad: playAudio()"
      >
        Got mail?
      </button>
      <span>📬</span>
      <span id="counter" hx-get="/api/v1/count" hx-trigger="every 1s">
        <%= count %>
      </span>
    </div>
    <% if (error) { %>
    <h2 class="pt-4 pb-1 font-mono text-xl">@error</h2>
    <p>
      ⚠️ Oh no! Something strange happened... If this keeps happening,
      <a
        href="https://github.com/zimeg/slack-sandbox/issues/new"
        class="cursor-pointer underline"
      >
        send a message
      </a>
      to the maintainers.
    </p>
    <p>Code: <code class="font-sm font-mono"><%= error.code %></code></p>
    <p>
      Otherwise, another attempt might be made from
      <a
        href="https://surgem.ai/"
        class="cursor-pointer font-sm font-mono underline"
        >https://surgem.ai/</a
      >.
    </p>
    <% } %> <% if (success) { %>
    <h2 class="pt-4 pb-1 font-mono text-xl">@success</h2>
    <p>
      🎉 Great news! The curious @surge bot has been installed and now
      <a href="<%= success %>" class="cursor-pointer underline">
        a message awaits</a
      >.
    </p>
    <% } %> <% if (slack) { %>
    <h2 class="pt-4 pb-1 font-mono text-xl">@surge</h2>
    <p>
      👋 Hello! I'm Surge, a Slack bot that organizes email and shares
      interesting updates.
    </p>
    <p>
      Send me a letter using the button above then start
      <a
        class="cursor-pointer underline"
        href="https://slack.com/help/articles/206819278-Send-emails-to-Slack"
        >sending email to Slack</a
      >! 💌
    </p>
    <p>
      Once messages are being delievered, add me to a workspace where we can
      chat more in messages.
    </p>
    <div class="pt-3 pb-2">
      <a
        href="/slack/install"
        style="
          align-items: center;
          color: #000;
          background-color: #fff;
          border: 1px solid #ddd;
          border-radius: 4px;
          display: inline-flex;
          font-family: Lato, sans-serif;
          font-size: 14px;
          font-weight: 600;
          height: 44px;
          justify-content: center;
          text-decoration: none;
          width: 204px;
        "
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          style="height: 18px; width: 18px; margin-right: 12px"
          viewBox="0 0 122.8 122.8"
        >
          <path
            d="M25.8 77.6c0 7.1-5.8 12.9-12.9 12.9S0 84.7 0 77.6s5.8-12.9 12.9-12.9h12.9v12.9zm6.5 0c0-7.1 5.8-12.9 12.9-12.9s12.9 5.8 12.9 12.9v32.3c0 7.1-5.8 12.9-12.9 12.9s-12.9-5.8-12.9-12.9V77.6z"
            fill="#e01e5a"
          ></path>
          <path
            d="M45.2 25.8c-7.1 0-12.9-5.8-12.9-12.9S38.1 0 45.2 0s12.9 5.8 12.9 12.9v12.9H45.2zm0 6.5c7.1 0 12.9 5.8 12.9 12.9s-5.8 12.9-12.9 12.9H12.9C5.8 58.1 0 52.3 0 45.2s5.8-12.9 12.9-12.9h32.3z"
            fill="#36c5f0"
          ></path>
          <path
            d="M97 45.2c0-7.1 5.8-12.9 12.9-12.9s12.9 5.8 12.9 12.9-5.8 12.9-12.9 12.9H97V45.2zm-6.5 0c0 7.1-5.8 12.9-12.9 12.9s-12.9-5.8-12.9-12.9V12.9C64.7 5.8 70.5 0 77.6 0s12.9 5.8 12.9 12.9v32.3z"
            fill="#2eb67d"
          ></path>
          <path
            d="M77.6 97c7.1 0 12.9 5.8 12.9 12.9s-5.8 12.9-12.9 12.9-12.9-5.8-12.9-12.9V97h12.9zm0-6.5c-7.1 0-12.9-5.8-12.9-12.9s5.8-12.9 12.9-12.9h32.3c7.1 0 12.9 5.8 12.9 12.9s-5.8 12.9-12.9 12.9H77.6z"
            fill="#ecb22e"
          ></path>
        </svg>
        Add to Slack
      </a>
    </div>
    <img
      src="https://github.com/zimeg/slack-sandbox/blob/main/js.bolt.surge/assets/icon.png?raw=true"
      width="420"
    />
    <% } %>
    <script>
      /**
       * With much appreciation this audio snippet is forwarded.
       */
      if (typeof mp3 === "undefined") {
        const url = "https://www.myinstants.com/media/sounds/yougotmail.mp3";
        var mp3 = new Audio(url);
        mp3.volume = 0.4;
      }
      function playAudio() {
        mp3.currentTime = 0;
        mp3.play();
      }
    </script>
  </body>
</html>
